import{a as P,d as V,e as R,f as q,g as z,h as G,m as H,n as U,o as J,q as Q,s as v}from"./chunk-R62AQPLH.js";import{$a as x,Ab as D,Da as g,Ha as c,J as I,K as y,Sa as i,Sb as j,T as K,Ta as n,Tb as L,U as F,Wb as B,Ya as W,Yb as C,_a as p,e as E,lb as l,lc as A,mb as u,nb as _,pa as o,pb as f,qb as h,rb as w,ta as k,ya as O,yb as N,za as b}from"./chunk-O6JE7VC5.js";import{a as T}from"./chunk-EQDQRRRY.js";var X=(()=>{class t{constructor(){this.articles=[],this.articlesSubject=new E([])}getArticles(){return this.articlesSubject.asObservable()}addArticle(e){e.id=this.articles.length+1,e.createdAt=new Date,this.articles.push(e),this.articlesSubject.next(this.articles)}searchArticles(e){return e=e.toLowerCase(),this.articles.filter(s=>s.title.toLowerCase().includes(e)||s.category.toLowerCase().includes(e)||s.description.toLowerCase().includes(e)||s.tags.some(r=>r.toLowerCase().includes(e)))}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function $(t,d){if(t&1&&(i(0,"option",27),l(1),n()),t&2){let e=d.$implicit;c("value",e),o(),u(e)}}function ee(t,d){if(t&1){let e=W();i(0,"span",28),l(1),i(2,"button",29),p("click",function(){let r=K(e).$implicit,m=x();return F(m.removeTag(r))}),l(3," \xD7 "),n()()}if(t&2){let e=d.$implicit;o(),_(" ",e," ")}}function te(t,d){if(t&1&&(i(0,"li"),l(1),n()),t&2){let e=d.$implicit;o(),u(e.name)}}function ie(t,d){if(t&1&&(i(0,"ul",30),g(1,te,2,1,"li",31),n()),t&2){let e=x();o(),c("ngForOf",e.newArticle.attachments)}}function ne(t,d){t&1&&(i(0,"div",32),l(1,"No articles found."),n())}function re(t,d){if(t&1&&(i(0,"span",44),l(1),n()),t&2){let e=d.$implicit;o(),_(" #",e," ")}}function oe(t,d){if(t&1&&(i(0,"div",41)(1,"div",42),g(2,re,2,1,"span",43),n()()),t&2){let e=x().$implicit;o(2),c("ngForOf",e.tags)}}function le(t,d){if(t&1&&(i(0,"li"),l(1),n()),t&2){let e=d.$implicit;o(),u(e.name)}}function ae(t,d){if(t&1&&(i(0,"div",45)(1,"div",46),l(2,"\u{1F4CE} Attachments:"),n(),i(3,"ul",47),g(4,le,2,1,"li",31),n()()),t&2){let e=x().$implicit;o(4),c("ngForOf",e.attachments)}}function se(t,d){if(t&1&&(i(0,"div",33)(1,"div",34)(2,"h3",35),l(3),n(),i(4,"span",36),l(5),N(6,"date"),n()(),i(7,"div",37),l(8),n(),i(9,"p",38),l(10),n(),g(11,oe,3,1,"div",39)(12,ae,5,1,"div",40),n()),t&2){let e=d.$implicit;o(3),u(e.title),o(2),u(D(6,6,e.createdAt,"short")),o(3),_("\u{1F4C2} ",e.category,""),o(2),_(" ",e.description," "),o(),c("ngIf",e.tags.length>0),o(),c("ngIf",e.attachments.length>0)}}var S=(()=>{class t{constructor(e){this.knowledgeService=e,this.articles=[],this.filteredArticles=[],this.newArticle={title:"",category:"",description:"",tags:[],attachments:[]},this.tagInput="",this.searchTerm="",this.categories=["Tea","Vegetable","Fruit","Pest Control","Irrigation","Harvesting"]}ngOnInit(){this.knowledgeService.getArticles().subscribe(e=>{this.articles=e,this.filteredArticles=e})}addTag(){let e=this.tagInput.trim();e&&!this.newArticle.tags.includes(e)&&this.newArticle.tags.push(e),this.tagInput=""}removeTag(e){this.newArticle.tags=this.newArticle.tags.filter(s=>s!==e)}onFileSelected(e){let s=e.target.files;for(let r=0;r<s.length;r++)this.newArticle.attachments.push(s[r])}submitArticle(){if(!this.newArticle.title||!this.newArticle.category){alert("Please fill in required fields (Title and Category).");return}this.knowledgeService.addArticle(T({},this.newArticle)),this.newArticle={title:"",category:"",description:"",tags:[],attachments:[]},this.filteredArticles=this.articles}search(){this.searchTerm?this.filteredArticles=this.knowledgeService.searchArticles(this.searchTerm):this.filteredArticles=this.articles}static{this.\u0275fac=function(s){return new(s||t)(k(X))}}static{this.\u0275cmp=O({type:t,selectors:[["app-knowledge-center"]],decls:43,vars:10,consts:[[1,"text-foreground","mb-6","mt-4","font-semibold"],[1,"rounded-xl","bg-white","px-4","py-10","shadow"],[1,"space-y-6","rounded-xl","border","border-green-200","p-6",3,"submit"],["for","title",1,"mb-1","block","text-sm","font-semibold","text-gray-700"],[1,"text-red-500"],["id","title","name","title","type","text","required","","placeholder","e.g., Best practices for pruning tea bushes",1,"w-full","rounded-lg","border","border-gray-300","px-4","py-2","outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","ngModel"],["for","category",1,"mb-1","block","text-sm","font-semibold","text-gray-700"],[1,"text-red-500","cursor-pointer"],["id","category","name","category","required","",1,"w-full","rounded-lg","border","border-gray-300","px-4","py-2","outline-none","focus:ring-2","focus:ring-green-500","cursor-pointer",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","description",1,"mb-1","block","text-sm","font-semibold","text-gray-700"],["id","description","name","description","rows","4","placeholder","Write a tip or detail...",1,"w-full","rounded-lg","border","border-gray-300","px-4","py-2","outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","ngModel"],[1,"mb-1","block","text-sm","font-semibold","text-gray-700"],[1,"flex","gap-2"],["type","text","name","tagInput","placeholder","e.g.fertilizer",1,"flex-grow","rounded-lg","border","border-gray-300","px-4","py-2","outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","keydown.enter","ngModel"],["type","button",1,"rounded-lg","bg-green-600","px-4","py-2","text-white","hover:bg-green-700","cursor-pointer",3,"click"],[1,"mt-3","flex","flex-wrap","gap-2"],["class","flex items-center gap-1 rounded-full bg-green-200 px-3 py-1 text-sm text-green-800 cursor-pointer",4,"ngFor","ngForOf"],["for","attachments",1,"mb-1","block","text-sm","font-semibold","text-gray-700","cursor-pointer"],["id","attachments","type","file","multiple","",1,"block","w-full","text-sm","text-gray-600","file:mr-4","file:rounded-lg","file:border-0","file:bg-green-600","file:py-2","file:px-4","file:text-sm","file:font-semibold","file:text-white","hover:file:bg-green-700","cursor-pointer",3,"change"],["class","mt-2 list-inside list-disc space-y-1 text-sm text-gray-700 cursor-pointer",4,"ngIf"],["type","submit",1,"w-full","rounded-lg","bg-green-700","py-2","font-semibold","text-white","transition","hover:bg-green-800","cursor-pointer"],[1,"mt-12","mb-6"],["type","text","placeholder"," Search articles by title, tags or category...",1,"w-full","rounded-lg","border","border-gray-300","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","input","ngModel"],["class","mt-10 text-center italic text-gray-500",4,"ngIf"],["class","group mb-6 rounded-xl border border-green-100 bg-white p-5 shadow-sm transition duration-200 hover:shadow-md",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","items-center","gap-1","rounded-full","bg-green-200","px-3","py-1","text-sm","text-green-800","cursor-pointer"],["type","button","aria-label","Remove tag",1,"ml-1","text-green-800","hover:text-red-500","cursor-pointer",3,"click"],[1,"mt-2","list-inside","list-disc","space-y-1","text-sm","text-gray-700","cursor-pointer"],[4,"ngFor","ngForOf"],[1,"mt-10","text-center","italic","text-gray-500"],[1,"group","mb-6","rounded-xl","border","border-green-100","bg-white","p-5","shadow-sm","transition","duration-200","hover:shadow-md"],[1,"flex","items-start","justify-between"],[1,"text-xl","font-semibold","text-green-800","group-hover:underline"],[1,"text-xs","text-gray-400"],[1,"mt-1","mb-2","text-sm","italic","text-green-600"],[1,"mb-3","whitespace-pre-line","leading-relaxed","text-gray-700"],["class","mb-3",4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"mb-3"],[1,"flex","flex-wrap","gap-2"],["class","rounded-full bg-emerald-100 px-3 py-1 text-xs font-medium tracking-wide text-emerald-700",4,"ngFor","ngForOf"],[1,"rounded-full","bg-emerald-100","px-3","py-1","text-xs","font-medium","tracking-wide","text-emerald-700"],[1,"mb-2"],[1,"mb-1","text-sm","font-medium","text-gray-800"],[1,"ml-2","list-inside","list-disc","text-sm","text-gray-600"]],template:function(s,r){s&1&&(i(0,"h3",0),l(1,"Knowledge Center"),n(),i(2,"div",1)(3,"form",2),p("submit",function(){return r.submitArticle()}),i(4,"div")(5,"label",3),l(6," Article Title "),i(7,"span",4),l(8,"*"),n()(),i(9,"input",5),w("ngModelChange",function(a){return h(r.newArticle.title,a)||(r.newArticle.title=a),a}),n()(),i(10,"div")(11,"label",6),l(12," Category "),i(13,"span",7),l(14,"*"),n()(),i(15,"select",8),w("ngModelChange",function(a){return h(r.newArticle.category,a)||(r.newArticle.category=a),a}),i(16,"option",9),l(17,"Select a category"),n(),g(18,$,2,2,"option",10),n()(),i(19,"div")(20,"label",11),l(21," Description "),n(),i(22,"textarea",12),w("ngModelChange",function(a){return h(r.newArticle.description,a)||(r.newArticle.description=a),a}),n()(),i(23,"div")(24,"label",13),l(25,"Tags"),n(),i(26,"div",14)(27,"input",15),w("ngModelChange",function(a){return h(r.tagInput,a)||(r.tagInput=a),a}),p("keydown.enter",function(a){return r.addTag(),a.preventDefault()}),n(),i(28,"button",16),p("click",function(){return r.addTag()}),l(29," Add "),n()(),i(30,"div",17),g(31,ee,4,1,"span",18),n()(),i(32,"div")(33,"label",19),l(34,"Attachments"),n(),i(35,"input",20),p("change",function(a){return r.onFileSelected(a)}),n(),g(36,ie,2,1,"ul",21),n(),i(37,"button",22),l(38," Upload Article "),n()(),i(39,"div",23)(40,"input",24),w("ngModelChange",function(a){return h(r.searchTerm,a)||(r.searchTerm=a),a}),p("input",function(){return r.search()}),n()(),g(41,ne,2,0,"div",25)(42,se,13,9,"div",26),n()),s&2&&(o(9),f("ngModel",r.newArticle.title),o(6),f("ngModel",r.newArticle.category),o(3),c("ngForOf",r.categories),o(4),f("ngModel",r.newArticle.description),o(5),f("ngModel",r.tagInput),o(4),c("ngForOf",r.newArticle.tags),o(5),c("ngIf",r.newArticle.attachments.length>0),o(4),f("ngModel",r.searchTerm),o(),c("ngIf",r.filteredArticles.length===0),o(),c("ngForOf",r.filteredArticles))},dependencies:[C,j,L,B,v,G,U,J,P,H,V,R,Q,z,q],encapsulation:2})}}return t})();var de=[{path:"",component:S}],Y=(()=>{class t{static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275mod=b({type:t})}static{this.\u0275inj=y({imports:[A.forChild(de),A]})}}return t})();var Se=(()=>{class t{static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275mod=b({type:t})}static{this.\u0275inj=y({imports:[C,v,Y,S]})}}return t})();export{Se as KnowledgeCenterModule};
