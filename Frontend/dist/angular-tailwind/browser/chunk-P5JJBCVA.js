import{a as ie,c as ne}from"./chunk-O7QCTWCW.js";import{$ as fe,R as oe,S as re,T as le,U as ae,V as me,W as de,X as pe,Y as se,Z as ce,_ as ue}from"./chunk-2ZJCXCTH.js";import{a as O,d as A,e as j,f as z,g as I,h as P,i as H,m as Q,n as U,o as G,p as te,q as J,s as b}from"./chunk-R62AQPLH.js";import{$a as F,Cb as Y,Da as g,Ha as h,J as W,K as B,Sa as n,Sb as R,T as y,Ta as o,Tb as L,U as _,Ua as D,Va as E,Wa as T,Ya as k,Yb as v,_a as w,kb as $,lb as l,lc as Z,mb as S,ob as ee,pa as a,pb as c,qb as u,rb as f,ta as x,ya as C,za as q}from"./chunk-O6JE7VC5.js";import{a as N,b as V}from"./chunk-EQDQRRRY.js";var ye=(()=>{class e{constructor(t){this.dialogRef=t,this.entry={field:"",date:"",item:"",quantityApplied:0,appliedBy:""}}submit(){this.dialogRef.close(this.entry)}close(){this.dialogRef.close(null)}static{this.\u0275fac=function(r){return new(r||e)(x(ie))}}static{this.\u0275cmp=C({type:e,selectors:[["app-application-form-dialog"]],decls:30,vars:5,consts:[["applicationForm","ngForm"],[1,"rounded-lg","border","border-gray-200","bg-white","p-8"],[1,"text-foreground","mb-4","font-semibold"],[1,"grid","grid-cols-1","gap-6","md:grid-cols-2",3,"ngSubmit"],[1,"mb-1","block","text-sm","font-medium","text-gray-700"],["type","text","name","field","required","","placeholder","Field",1,"w-full","rounded-md","border","border-gray-300","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","ngModel"],["type","date","name","date","required","",1,"w-full","rounded-md","border","border-gray-300","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-green-500","cursor-pointer",3,"ngModelChange","ngModel"],["type","text","name","item","required","","placeholder","Item (e.g., Urea)",1,"w-full","rounded-md","border","border-gray-300","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","ngModel"],["type","number","name","quantityApplied","required","","min","0","placeholder","Quantity (kg)",1,"w-full","rounded-md","border","border-gray-300","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","ngModel"],[1,"md:col-span-2"],["type","text","name","appliedBy","required","","placeholder","Applied By",1,"w-full","rounded-md","border","border-gray-300","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","ngModel"],[1,"flex","justify-end","space-x-2","md:col-span-2"],["type","button",1,"bg-muted","text-muted-foreground","hover:text-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","cursor-pointer",3,"click"],["type","submit",1,"bg-primary","text-primary-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","cursor-pointer"]],template:function(r,i){if(r&1){let s=k();n(0,"div",1)(1,"h3",2),l(2,"Fertilizer / Pesticide Application"),o(),n(3,"form",3,0),w("ngSubmit",function(){return y(s),_(i.submit())}),n(5,"div")(6,"label",4),l(7,"Field"),o(),n(8,"input",5),f("ngModelChange",function(p){return y(s),u(i.entry.field,p)||(i.entry.field=p),_(p)}),o()(),n(9,"div")(10,"label",4),l(11,"Date"),o(),n(12,"input",6),f("ngModelChange",function(p){return y(s),u(i.entry.date,p)||(i.entry.date=p),_(p)}),o()(),n(13,"div")(14,"label",4),l(15,"Item"),o(),n(16,"input",7),f("ngModelChange",function(p){return y(s),u(i.entry.item,p)||(i.entry.item=p),_(p)}),o()(),n(17,"div")(18,"label",4),l(19,"Quantity (kg)"),o(),n(20,"input",8),f("ngModelChange",function(p){return y(s),u(i.entry.quantityApplied,p)||(i.entry.quantityApplied=p),_(p)}),o()(),n(21,"div",9)(22,"label",4),l(23,"Applied By"),o(),n(24,"input",10),f("ngModelChange",function(p){return y(s),u(i.entry.appliedBy,p)||(i.entry.appliedBy=p),_(p)}),o()(),n(25,"div",11)(26,"button",12),w("click",function(){return y(s),_(i.close())}),l(27," Cancel "),o(),n(28,"button",13),l(29," Submit "),o()()()()}r&2&&(a(8),c("ngModel",i.entry.field),a(4),c("ngModel",i.entry.date),a(4),c("ngModel",i.entry.item),a(4),c("ngModel",i.entry.quantityApplied),a(4),c("ngModel",i.entry.appliedBy))},dependencies:[v,b,P,O,H,A,j,J,te,I,z],encapsulation:2})}}return e})();var _e=(()=>{class e{constructor(){this.applications=[]}addEntry(t){this.applications.push(t)}getAll(){return[...this.applications]}getByField(t){let r=t.trim().toLowerCase();return this.applications.filter(i=>i.field.toLowerCase().includes(r))}getNextApplication(t){let r=this.applications.filter(i=>i.field.toLowerCase()===t.trim().toLowerCase()).sort((i,s)=>new Date(s.date).getTime()-new Date(i.date).getTime());return r.length?r[0].date:null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function xe(e,d){if(e&1&&(n(0,"option",10),l(1),o()),e&2){let t=d.$implicit;h("value",t),a(),S(t)}}function Me(e,d){e&1&&(n(0,"th",22),l(1,"Date"),o())}function Fe(e,d){if(e&1&&(n(0,"td",23),l(1),o()),e&2){let t=d.$implicit;a(),S(t.date)}}function Ae(e,d){e&1&&(n(0,"th",22),l(1,"Item"),o())}function Ie(e,d){if(e&1&&(n(0,"td",23),l(1),o()),e&2){let t=d.$implicit;a(),S(t.item)}}function De(e,d){e&1&&(n(0,"th",22),l(1,"Quantity (kg)"),o())}function Ee(e,d){if(e&1&&(n(0,"td",23),l(1),o()),e&2){let t=d.$implicit;a(),S(t.quantityApplied)}}function Te(e,d){e&1&&(n(0,"th",22),l(1,"Applied By"),o())}function Ne(e,d){if(e&1&&(n(0,"td",23),l(1),o()),e&2){let t=d.$implicit;a(),S(t.appliedBy)}}function Ve(e,d){e&1&&D(0,"tr",24)}function We(e,d){e&1&&D(0,"tr",25)}function Be(e,d){if(e&1&&(n(0,"table",13),E(1,14),g(2,Me,2,0,"th",15)(3,Fe,2,1,"td",16),T(),E(4,17),g(5,Ae,2,0,"th",15)(6,Ie,2,1,"td",16),T(),E(7,18),g(8,De,2,0,"th",15)(9,Ee,2,1,"td",16),T(),E(10,19),g(11,Te,2,0,"th",15)(12,Ne,2,1,"td",16),T(),g(13,Ve,1,0,"tr",20)(14,We,1,0,"tr",21),o()),e&2){let t=F(2);h("dataSource",t.getHistoryByField()),a(13),h("matHeaderRowDef",t.displayedColumns),a(),h("matRowDefColumns",t.displayedColumns)}}function qe(e,d){e&1&&(n(0,"p",26),l(1,"No history records available for this field."),o())}function ke(e,d){if(e&1&&(n(0,"div",11),g(1,Be,15,3,"table",12)(2,qe,2,0,"ng-template",null,0,Y),o()),e&2){let t=$(3),r=F();a(),h("ngIf",r.getHistoryByField().length>0)("ngIfElse",t)}}function Re(e,d){e&1&&(n(0,"p",27),l(1,"No entries found for this field."),o())}function Le(e,d){if(e&1&&(n(0,"div",28)(1,"div",29),l(2," Last Application Date: "),n(3,"span",30),l(4),o()(),n(5,"div",31),l(6," Next Scheduled Date (+14 days): "),n(7,"span",30),l(8),o()()()),e&2){let t=F();a(4),S(t.getNextApplicationDate()||"N/A"),a(4),S(t.getNextScheduledDate()||"N/A")}}var K=(()=>{class e{constructor(t,r){this.applicationService=t,this.dialog=r,this.displayedColumns=["date","item","quantityApplied","appliedBy"],this.applications=[],this.fieldFilter=""}ngOnInit(){this.applicationService.getAll().length===0&&(this.applicationService.addEntry({id:1,field:"Field A",date:"2025-07-01",item:"Urea",quantityApplied:20,appliedBy:"John"}),this.applicationService.addEntry({id:2,field:"Field B",date:"2025-07-05",item:"Compost",quantityApplied:50,appliedBy:"Mary"})),this.refresh()}openApplicationDialog(){this.dialog.open(ye,{width:"500px",disableClose:!0}).afterClosed().subscribe(r=>{if(r){let i=V(N({},r),{id:Date.now(),date:new Date(r.date).toISOString().split("T")[0]});this.applicationService.addEntry(i),this.refresh()}})}refresh(){this.applications=this.applicationService.getAll()}getHistoryByField(){return this.applicationService.getByField(this.fieldFilter)}getNextApplicationDate(){return this.applicationService.getNextApplication(this.fieldFilter)}getFieldList(){let t=this.applicationService.getAll().map(r=>r.field.trim());return[...new Set(t)]}getNextScheduledDate(){let t=this.getNextApplicationDate();if(!t)return null;let r=new Date(t);return r.setDate(r.getDate()+14),r.toISOString().split("T")[0]}isApplicationOverdue(){let t=this.getNextScheduledDate();return t?new Date().toISOString().split("T")[0]>t:!1}static{this.\u0275fac=function(r){return new(r||e)(x(_e),x(ne))}}static{this.\u0275cmp=C({type:e,selectors:[["app-application-form"]],decls:14,vars:4,consts:[["noHistory",""],[1,"mb-6","mt-4","flex","items-center","justify-between"],[1,"text-foreground","font-semibold"],[1,"bg-primary","text-primary-foreground","hover:bg-primary-dark","rounded-md","px-4","py-2.5","text-xs","font-semibold","transition","cursor-pointer",3,"click"],[1,"mx-auto","w-full","rounded-md","bg-white","p-6","shadow-md"],["name","fieldFilter",1,"input","mb-2","w-full","rounded","border","px-4","py-2","cursor-pointer",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","overflow-x-auto cursor-pointer",4,"ngIf"],["class","mt-6 space-y-2",4,"ngIf"],[3,"value"],[1,"overflow-x-auto","cursor-pointer"],["mat-table","","class","mat-elevation-z1 w-full",3,"dataSource",4,"ngIf","ngIfElse"],["mat-table","",1,"mat-elevation-z1","w-full",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","item"],["matColumnDef","quantityApplied"],["matColumnDef","appliedBy"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mt-4","text-red-600"],[1,"mt-2","text-sm","text-gray-500"],[1,"mt-6","space-y-2"],[1,"font-semibold","text-green-600"],[1,"font-normal"],[1,"font-semibold","text-blue-600"]],template:function(r,i){if(r&1){let s=k();n(0,"div",1)(1,"h3",2),l(2,"Field Application History"),o(),n(3,"button",3),w("click",function(){return y(s),_(i.openApplicationDialog())}),l(4," Add Application "),o()(),n(5,"div",4)(6,"select",5),f("ngModelChange",function(p){return y(s),u(i.fieldFilter,p)||(i.fieldFilter=p),_(p)}),w("ngModelChange",function(){return y(s),_(i.refresh())}),n(7,"option",6),l(8,"Select Field to Filter"),o(),g(9,xe,2,2,"option",7),o(),g(10,ke,4,2,"div",8)(11,Re,2,0,"ng-template",null,0,Y),o(),g(13,Le,9,2,"div",9)}r&2&&(a(6),c("ngModel",i.fieldFilter),a(3),h("ngForOf",i.getFieldList()),a(),h("ngIf",i.fieldFilter),a(3),h("ngIf",i.fieldFilter))},dependencies:[v,R,L,b,U,G,Q,A,I,fe,oe,le,pe,ae,re,se,me,de,ce,ue],encapsulation:2})}}return e})();var he=(()=>{class e{constructor(){this.items=[]}addItem(t){this.items.push(t)}getAll(){return this.items}getLowStockItems(t=10){return this.items.filter(r=>r.quantity<t)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function je(e,d){if(e&1&&(n(0,"li"),l(1),o()),e&2){let t=d.$implicit;a(),ee("",t.name," \u2014 Only ",t.quantity," left!")}}function ze(e,d){if(e&1&&(n(0,"div",14)(1,"h3",15),l(2,"Low Stock Alert"),o(),n(3,"ul",16),g(4,je,2,2,"li",17),o()()),e&2){let t=F();a(4),h("ngForOf",t.lowStockItems)}}var X=(()=>{class e{constructor(t){this.inventoryService=t,this.item={},this.inventory=[],this.lowStockItems=[]}ngOnInit(){this.refresh()}addItem(){let t=V(N({},this.item),{id:Date.now(),name:this.item.name||"",type:this.item.type||"",brand:this.item.brand||"",quantity:this.item.quantity||0,unitCost:this.item.unitCost||0});this.inventoryService.addItem(t),this.item={},this.refresh()}refresh(){this.inventory=this.inventoryService.getAll(),this.lowStockItems=this.inventoryService.getLowStockItems()}static{this.\u0275fac=function(r){return new(r||e)(x(he))}}static{this.\u0275cmp=C({type:e,selectors:[["app-inventory-form"]],decls:19,vars:6,consts:[[1,"mb-6","mt-8","flex","items-center","justify-between"],[1,"text-foreground","font-semibold"],[1,"bg-primary","text-primary-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","cursor-pointer",3,"click"],[1,"mx-auto","w-full","rounded-md","bg-white","p-6","shadow-md"],[1,"grid","w-full","gap-4","md:grid-cols-2"],["placeholder","Item Name","name","name","required","",1,"w-full","rounded","border","px-4","py-2",3,"ngModelChange","ngModel"],["name","type","required","",1,"w-full","rounded","border","px-4","py-2","cursor-pointer",3,"ngModelChange","ngModel"],["value",""],["value","Fertilizer"],["value","Pesticide"],["placeholder","Brand","name","brand","required","",1,"w-full","rounded","border","px-4","py-2",3,"ngModelChange","ngModel"],["type","number","placeholder","Quantity","name","quantity","required","",1,"w-full","rounded","border","px-4","py-2",3,"ngModelChange","ngModel"],["type","number","placeholder","Unit Cost","name","unitCost","required","",1,"w-full","rounded","border","px-4","py-2","md:col-span-2",3,"ngModelChange","ngModel"],["class","mt-8 rounded border border-red-300 bg-red-100 p-4 text-red-800",4,"ngIf"],[1,"mt-8","rounded","border","border-red-300","bg-red-100","p-4","text-red-800"],[1,"mb-2","text-lg","font-bold"],[1,"ml-6","list-disc","text-sm"],[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(n(0,"div",0)(1,"h3",1),l(2,"Inventory Management Form"),o(),n(3,"button",2),w("click",function(){return i.addItem()}),l(4," Add Item "),o()(),n(5,"div",3)(6,"form",4)(7,"input",5),f("ngModelChange",function(m){return u(i.item.name,m)||(i.item.name=m),m}),o(),n(8,"select",6),f("ngModelChange",function(m){return u(i.item.type,m)||(i.item.type=m),m}),n(9,"option",7),l(10,"Select Type"),o(),n(11,"option",8),l(12,"Fertilizer"),o(),n(13,"option",9),l(14,"Pesticide"),o()(),n(15,"input",10),f("ngModelChange",function(m){return u(i.item.brand,m)||(i.item.brand=m),m}),o(),n(16,"input",11),f("ngModelChange",function(m){return u(i.item.quantity,m)||(i.item.quantity=m),m}),o(),n(17,"input",12),f("ngModelChange",function(m){return u(i.item.unitCost,m)||(i.item.unitCost=m),m}),o()(),g(18,ze,5,1,"div",13),o()),r&2&&(a(7),c("ngModel",i.item.name),a(),c("ngModel",i.item.type),a(7),c("ngModel",i.item.brand),a(),c("ngModel",i.item.quantity),a(),c("ngModel",i.item.unitCost),a(),h("ngIf",i.lowStockItems.length>0))},dependencies:[v,R,L,b,P,U,G,O,H,Q,A,j,J,I,z],encapsulation:2})}}return e})();var Ce=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=C({type:e,selectors:[["app-fertilizer"]],decls:2,vars:0,template:function(r,i){r&1&&D(0,"app-application-form")(1,"app-inventory-form")},dependencies:[K,X],encapsulation:2})}}return e})();var Pe=[{path:"",redirectTo:"fertilizer",pathMatch:"full"},{path:"fertilizer",component:Ce}],we=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=q({type:e})}static{this.\u0275inj=B({imports:[Z.forChild(Pe),Z]})}}return e})();var gt=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=q({type:e})}static{this.\u0275inj=B({imports:[v,b,we,X,K]})}}return e})();export{gt as FertilizerModule};
