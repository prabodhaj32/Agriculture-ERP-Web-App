import{$a as O,Ab as N,Da as w,E as g,Ha as l,J as v,K as b,M as P,Sa as n,Sb as H,Ta as i,Tb as K,Ua as f,Wb as L,Yb as d,bc as R,d as T,ec as y,h as F,hc as _,i as j,lb as s,lc as W,mb as m,nb as u,oa as $,ob as U,pa as a,t as A,ta as h,ya as p,yb as z,za as x}from"./chunk-O6JE7VC5.js";import"./chunk-EQDQRRRY.js";var C=(()=>{class t{constructor(){this.stats=null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-stats-cards"]],inputs:{stats:"stats"},decls:21,vars:4,consts:[[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","animate-fade-in"],[1,"bg-gradient-to-r","from-green-100","to-green-300","p-4","rounded-lg","shadow-lg","text-center","transform","transition-transform","hover:scale-105"],[1,"text-sm","text-gray-700","font-medium"],[1,"text-2xl","font-bold","text-green-800"],[1,"bg-gradient-to-r","from-blue-100","to-blue-300","p-4","rounded-lg","shadow-lg","text-center","transform","transition-transform","hover:scale-105"],[1,"text-2xl","font-bold","text-blue-800"],[1,"bg-gradient-to-r","from-yellow-100","to-green-300","p-4","rounded-lg","shadow-lg","text-center","transform","transition-transform","hover:scale-105"],[1,"text-2xl","font-bold","text-yellow-800"],[1,"bg-gradient-to-r","from-purple-100","to-purple-300","p-4","rounded-lg","shadow-lg","text-center","transform","transition-transform","hover:scale-105"],[1,"text-2xl","font-bold","text-purple-800"]],template:function(r,o){r&1&&(n(0,"div",0)(1,"div",1)(2,"p",2),s(3,"Total Fields"),i(),n(4,"p",3),s(5),i()(),n(6,"div",4)(7,"p",2),s(8,"Active Workers"),i(),n(9,"p",5),s(10),i()(),n(11,"div",6)(12,"p",2),s(13,"Today's Harvest"),i(),n(14,"p",7),s(15),i()(),n(16,"div",8)(17,"p",2),s(18,"Fertilizer Used"),i(),n(19,"p",9),s(20),i()()()),r&2&&(a(5),m(o.stats==null?null:o.stats.totalFields),a(5),m(o.stats==null?null:o.stats.activeWorkers),a(5),u("",o.stats==null?null:o.stats.todaysHarvestKg," kg"),a(5),u("",o.stats==null?null:o.stats.fertilizerUsedKg," kg"))},dependencies:[d],encapsulation:2})}}return t})();function Q(t,E){if(t&1&&(n(0,"div",1),f(1,"img",2),n(2,"div")(3,"p",3),s(4),i(),n(5,"p",4),s(6),i()()()),t&2){let e=O();a(),l("src","https://openweathermap.org/img/wn/"+e.weather.weather[0].icon+".png",$),a(3),u("",e.weather.main.temp,"\xB0C"),a(2),m(e.weather.weather[0].description)}}var S=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-weather-widget"]],inputs:{weather:"weather"},decls:1,vars:1,consts:[["class","bg-blue-50 p-5 rounded-xl shadow-lg flex items-center gap-4 animate-fade-in w-fit border border-blue-200",4,"ngIf"],[1,"bg-blue-50","p-5","rounded-xl","shadow-lg","flex","items-center","gap-4","animate-fade-in","w-fit","border","border-blue-200"],["alt","weather icon",1,"w-14","h-14","animate-pulse",3,"src"],[1,"text-2xl","font-bold","text-blue-800"],[1,"text-sm","text-gray-600","capitalize"]],template:function(r,o){r&1&&w(0,Q,7,3,"div",0),r&2&&l("ngIf",o.weather==null?null:o.weather.main)},dependencies:[d,K],encapsulation:2})}}return t})();function V(t,E){if(t&1&&(n(0,"div",2)(1,"div",3)(2,"span",4),s(3),i(),n(4,"span",5),s(5),z(6,"date"),i()(),n(7,"div",6)(8,"span",7),s(9),i(),s(10),i()()),t&2){let e=E.$implicit;a(3),m(e.title),a(2),m(N(6,5,e.dueDate,"short")),a(4),m(e.type),a(),U(" \u2013 ",e.assignedField," (",e.assignedWorker,") ")}}var k=(()=>{class t{constructor(){this.tasks=[]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-task-alerts"]],inputs:{tasks:"tasks"},decls:4,vars:1,consts:[[1,"text-xl","font-bold","mb-4","text-gray-800"],["class","bg-white p-4 rounded-xl border border-gray-200 mb-3 shadow-md transition hover:shadow-lg hover:scale-[1.01] duration-200",4,"ngFor","ngForOf"],[1,"bg-white","p-4","rounded-xl","border","border-gray-200","mb-3","shadow-md","transition","hover:shadow-lg","hover:scale-[1.01]","duration-200"],[1,"flex","justify-between","items-center"],[1,"text-base","font-semibold","text-gray-700"],[1,"text-sm","text-gray-500"],[1,"mt-1","text-sm","text-gray-500","italic"],[1,"capitalize","text-green-700"]],template:function(r,o){r&1&&(n(0,"div")(1,"h3",0),s(2,"Upcoming Tasks"),i(),w(3,V,11,8,"div",1),i()),r&2&&(a(3),l("ngForOf",o.tasks))},dependencies:[d,H,L],encapsulation:2})}}return t})();var I=(()=>{class t{getStats(){return F({totalFields:12,activeWorkers:8,todaysHarvestKg:350,fertilizerUsedKg:45})}getTasks(){return F([{title:"Harvest in Plot A",type:"harvest",dueDate:new Date,assignedField:"Field A",assignedWorker:"Kamal"},{title:"Fertilizer Application",type:"fertilizing",dueDate:new Date(Date.now()+3600*1e3*6),assignedField:"Field B",assignedWorker:"Saman"}])}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var D=(()=>{class t{constructor(e){this.http=e,this.API_KEY="9a41ba142ca0894c5d5c1e3ac09ae822",this.LAT=7.2906,this.LON=80.6336,this.URL=`https://api.openweathermap.org/data/2.5/weather?lat=${this.LAT}&lon=${this.LON}&appid=${this.API_KEY}&units=metric`}getWeather(){return this.http.get(this.URL).pipe(A(e=>(console.error("Weather API Error:",{status:e.status,statusText:e.statusText,message:e.message,url:e.url,errorDetails:e.error}),j(()=>new Error("Failed to fetch weather data")))))}static{this.\u0275fac=function(r){return new(r||t)(P(R))}}static{this.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var M=(()=>{class t{constructor(e,r){this.dashboardService=e,this.weatherService=r,this.stats=null,this.tasks=[],this.destroy$=new T}ngOnInit(){this.weatherService.getWeather().pipe(g(this.destroy$)).subscribe({next:e=>this.weather=e,error:e=>{console.error("Weather data load failed:",e),this.weather={error:"Unable to fetch weather data. Check API key or try again later."}}}),this.dashboardService.getStats().pipe(g(this.destroy$)).subscribe({next:e=>this.stats=e,error:e=>{console.error("Stats load failed:",e),this.stats=null}}),this.dashboardService.getTasks().pipe(g(this.destroy$)).subscribe(e=>this.tasks=e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(r){return new(r||t)(h(I),h(D))}}static{this.\u0275cmp=p({type:t,selectors:[["app-dashboard-page"]],decls:3,vars:3,consts:[[3,"stats"],[3,"weather"],[3,"tasks"]],template:function(r,o){r&1&&f(0,"app-stats-cards",0)(1,"app-weather-widget",1)(2,"app-task-alerts",2),r&2&&(l("stats",o.stats),a(),l("weather",o.weather),a(),l("tasks",o.tasks))},dependencies:[d,C,S,k],encapsulation:2})}}return t})();var q=(()=>{class t{constructor(e,r){this.dashboardService=e,this.weatherService=r,this.tasks=[]}ngOnInit(){this.dashboardService.getStats().subscribe(e=>this.stats=e),this.weatherService.getWeather().subscribe(e=>this.weather=e),this.dashboardService.getTasks().subscribe(e=>this.tasks=e)}static{this.\u0275fac=function(r){return new(r||t)(h(I),h(D))}}static{this.\u0275cmp=p({type:t,selectors:[["app-dashboard"]],decls:1,vars:0,template:function(r,o){r&1&&f(0,"router-outlet")},dependencies:[d,_,y],encapsulation:2})}}return t})();var X=[{path:"",component:q,children:[{path:"",component:M}]}],G=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=x({type:t})}static{this.\u0275inj=b({imports:[W.forChild(X),W]})}}return t})();var Tt=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=x({type:t})}static{this.\u0275inj=b({imports:[d,G,M,C,S,k,y]})}}return t})();export{Tt as DashboardModule};
