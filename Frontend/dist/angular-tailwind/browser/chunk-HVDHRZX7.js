import{a as Ie,d as Le}from"./chunk-EYD5MH7D.js";import"./chunk-F5X5MWHG.js";import{b as De}from"./chunk-PJFO3UXP.js";import{a as Ve,b as Ne,c as Re,d as Ae}from"./chunk-3UC5BQGJ.js";import{a as ge,b as k}from"./chunk-WN5LCBDM.js";import{b as fe,d as j}from"./chunk-IJAZRT5H.js";import"./chunk-Q6H5GPQ3.js";import{a as _e,b as he,c as Ce,d as O}from"./chunk-O7QCTWCW.js";import{$ as Te,R as Me,S as be,T as xe,U as Se,V as we,W as ye,X as Ue,Y as ve,Z as Fe,_ as Ee}from"./chunk-2ZJCXCTH.js";import{a as ne,d as oe,e as re,f as se,g as ae,h as le,j as me,m as de,n as pe,o as ue,q as ce,s as T}from"./chunk-R62AQPLH.js";import{$a as v,Cb as X,Da as f,Ha as c,J as z,K as A,Pb as Y,Qb as Z,Sa as i,T as p,Ta as n,Tb as ee,U as u,Ua as I,Va as g,Vb as te,Wa as _,Ya as L,Yb as E,_ as J,_a as b,e as G,ec as ie,h as R,kb as D,lb as r,lc as $,mb as y,nb as F,pa as l,pb as x,qb as S,rb as w,ta as M,ub as H,ya as U,yb as K,za as W,zb as Q}from"./chunk-O6JE7VC5.js";import{a as C,b as q}from"./chunk-EQDQRRRY.js";var P=(()=>{class e{constructor(){this.users$=new G([]),this.users$.next([{id:"1",fullName:"John Doe",email:"john@example.com",phone:"123456789",role:"FieldOfficer",password:"",assignedFields:["Tea"]}])}getUsers(){return this.users$.asObservable()}addUser(t){let s=this.users$.getValue();return t.id||(t.id=this.generateId()),this.users$.next([...s,t]),R(void 0)}updateUser(t){let s=this.users$.getValue().map(o=>o.id===t.id?C(C({},o),t):o);return this.users$.next(s),R(void 0)}deleteUser(t){let s=this.users$.getValue().filter(o=>o.id!==t);return this.users$.next(s),R(void 0)}generateId(){return Math.random().toString(36).substring(2,9)}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var je=()=>({standalone:!0}),N=(()=>{class e{constructor(t,s,o,d){this.userService=t,this.location=s,this.dialogRef=o,this.data=d,this.user={fullName:"",email:"",phone:"",role:"FieldOfficer",password:"",assignedFields:[]},this.formSubmit=new J,this.assignedField="Tea"}ngOnInit(){this.data?.user&&(this.user=C({},this.data.user)),this.user?.assignedFields?.length&&(this.assignedField=this.user.assignedFields[0])}onSubmit(){this.user.assignedFields=[this.assignedField],(this.user.id?this.userService.updateUser(this.user):this.userService.addUser(this.user)).subscribe(()=>{this.formSubmit.emit(),this.dialogRef?this.dialogRef.close():this.resetForm()})}onCancel(){this.resetForm(),this.dialogRef&&this.dialogRef.close()}resetForm(){this.user={fullName:"",email:"",phone:"",role:"FieldOfficer",password:"",assignedFields:[]},this.assignedField="Tea"}static{this.\u0275fac=function(s){return new(s||e)(M(P),M(Y),M(_e,8),M(he,8))}}static{this.\u0275cmp=U({type:e,selectors:[["app-user-form"]],inputs:{user:"user"},outputs:{formSubmit:"formSubmit"},decls:48,vars:13,consts:[["userForm","ngForm"],[1,"bg-white","p-6","sm:p-8","rounded-md","w-full"],[1,"text-foreground","font-semibold","mb-4"],["novalidate","",1,"space-y-6",3,"ngSubmit"],["for","fullName",1,"block","mb-1","font-semibold","text-gray-700"],["id","fullName","type","text","name","fullName","required","","placeholder","Enter full name",1,"w-full","p-3","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-green-600",3,"ngModelChange","ngModel"],["for","email",1,"block","mb-1","font-semibold","text-gray-700"],["id","email","type","email","name","email","required","","placeholder","Enter email address",1,"w-full","p-3","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-green-600",3,"ngModelChange","ngModel"],["for","phone",1,"block","mb-1","font-semibold","text-gray-700"],["id","phone","type","text","name","phone","required","","placeholder","Enter phone number",1,"w-full","p-3","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-green-600",3,"ngModelChange","ngModel"],["for","role",1,"block","mb-1","font-semibold","text-gray-700"],["id","role","name","role","required","",1,"w-full","p-3","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-green-600","cursor-pointer",3,"ngModelChange","ngModel"],["value","Admin"],["value","FieldOfficer"],["value","Manager"],["for","password",1,"block","mb-1","font-semibold","text-gray-700"],["id","password","type","password","name","password","required","","placeholder","Enter password",1,"w-full","p-3","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-green-600",3,"ngModelChange","ngModel"],[1,"block","mb-1","font-semibold","text-gray-700"],[1,"flex","flex-wrap","gap-6"],[1,"inline-flex","items-center"],["type","radio","name","assignedField","value","Tea",1,"form-radio","text-green-600","cursor-pointer",3,"ngModelChange","ngModel","ngModelOptions"],[1,"ml-2"],["type","radio","name","assignedField","value","Coconut",1,"form-radio","text-green-600","cursor-pointer",3,"ngModelChange","ngModel","ngModelOptions"],[1,"flex","justify-end","mt-6","gap-4"],["type","submit",1,"bg-primary","text-primary-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","cursor-pointer",3,"disabled"],["type","button",1,"bg-muted","text-muted-foreground","hover:text-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","cursor-pointer",3,"click"]],template:function(s,o){if(s&1){let d=L();i(0,"div",1)(1,"h3",2),r(2,"Create user form"),n(),i(3,"form",3,0),b("ngSubmit",function(){return p(d),u(o.onSubmit())}),i(5,"div")(6,"label",4),r(7,"Full Name"),n(),i(8,"input",5),w("ngModelChange",function(m){return p(d),S(o.user.fullName,m)||(o.user.fullName=m),u(m)}),n()(),i(9,"div")(10,"label",6),r(11,"Email"),n(),i(12,"input",7),w("ngModelChange",function(m){return p(d),S(o.user.email,m)||(o.user.email=m),u(m)}),n()(),i(13,"div")(14,"label",8),r(15,"Phone"),n(),i(16,"input",9),w("ngModelChange",function(m){return p(d),S(o.user.phone,m)||(o.user.phone=m),u(m)}),n()(),i(17,"div")(18,"label",10),r(19,"Role"),n(),i(20,"select",11),w("ngModelChange",function(m){return p(d),S(o.user.role,m)||(o.user.role=m),u(m)}),i(21,"option",12),r(22,"Admin"),n(),i(23,"option",13),r(24,"Field Officer"),n(),i(25,"option",14),r(26,"Manager"),n()()(),i(27,"div")(28,"label",15),r(29,"Password"),n(),i(30,"input",16),w("ngModelChange",function(m){return p(d),S(o.user.password,m)||(o.user.password=m),u(m)}),n()(),i(31,"div")(32,"label",17),r(33,"Assigned Field"),n(),i(34,"div",18)(35,"label",19)(36,"input",20),w("ngModelChange",function(m){return p(d),S(o.assignedField,m)||(o.assignedField=m),u(m)}),n(),i(37,"span",21),r(38,"Tea"),n()(),i(39,"label",19)(40,"input",22),w("ngModelChange",function(m){return p(d),S(o.assignedField,m)||(o.assignedField=m),u(m)}),n(),i(41,"span",21),r(42,"Coconut"),n()()()(),i(43,"div",23)(44,"button",24),r(45),n(),i(46,"button",25),b("click",function(){return p(d),u(o.onCancel())}),r(47," Cancel "),n()()()()}if(s&2){let d=D(4);l(8),x("ngModel",o.user.fullName),l(4),x("ngModel",o.user.email),l(4),x("ngModel",o.user.phone),l(4),x("ngModel",o.user.role),l(10),x("ngModel",o.user.password),l(6),x("ngModel",o.assignedField),c("ngModelOptions",H(11,je)),l(4),x("ngModel",o.assignedField),c("ngModelOptions",H(12,je)),l(4),c("disabled",d.invalid),l(),F(" ",o.user.id?"Update":"Create"," User ")}},dependencies:[E,T,le,pe,ue,ne,de,me,oe,re,ce,ae,se,j,k],encapsulation:2})}}return e})();function He(e,a){e&1&&(i(0,"th",20),r(1,"Full Name"),n())}function $e(e,a){if(e&1&&(i(0,"td",21),r(1),n()),e&2){let t=a.$implicit;l(),y(t.fullName)}}function qe(e,a){e&1&&(i(0,"th",20),r(1,"Email"),n())}function Ge(e,a){if(e&1&&(i(0,"td",21),r(1),n()),e&2){let t=a.$implicit;l(),y(t.email)}}function ze(e,a){e&1&&(i(0,"th",20),r(1,"Phone"),n())}function Je(e,a){if(e&1&&(i(0,"td",21),r(1),n()),e&2){let t=a.$implicit;l(),y(t.phone)}}function Ke(e,a){e&1&&(i(0,"th",20),r(1,"Role"),n())}function Qe(e,a){if(e&1&&(i(0,"td",21),r(1),K(2,"titlecase"),n()),e&2){let t=a.$implicit;l(),y(Q(2,1,t.role))}}function Xe(e,a){e&1&&(i(0,"th",20),r(1,"Password"),n())}function Ye(e,a){if(e&1&&(i(0,"td",21),r(1),n()),e&2){let t=a.$implicit;l(),F(" ","*".repeat((t.password==null?null:t.password.length)||0)," ")}}function Ze(e,a){e&1&&(i(0,"th",20),r(1,"Assigned Fields"),n())}function et(e,a){if(e&1&&(g(0),r(1),_()),e&2){let t=v().$implicit;l(),F(" ",t.assignedFields.join(", ")," ")}}function tt(e,a){e&1&&(i(0,"span",23),r(1,"None"),n())}function it(e,a){if(e&1&&(i(0,"td",21),f(1,et,2,1,"ng-container",22)(2,tt,2,0,"ng-template",null,0,X),n()),e&2){let t=a.$implicit,s=D(3);l(),c("ngIf",(t.assignedFields==null?null:t.assignedFields.length)>0)("ngIfElse",s)}}function nt(e,a){e&1&&(i(0,"th",20),r(1,"Status"),n())}function ot(e,a){if(e&1&&(i(0,"td",21)(1,"span",24),r(2),n()()),e&2){let t=a.$implicit;l(),c("ngClass",t.isActive?"font-medium text-green-600":"font-medium text-red-600"),l(),F(" ",t.isActive?"Active":"Disabled"," ")}}function rt(e,a){e&1&&(i(0,"th",20),r(1,"Actions"),n())}function st(e,a){if(e&1){let t=L();i(0,"td",21)(1,"button",25)(2,"mat-icon"),r(3,"more_vert"),n()(),i(4,"mat-menu",null,1)(6,"button",26),b("click",function(){let o=p(t).$implicit,d=v();return u(d.editUser(o))}),i(7,"mat-icon"),r(8,"edit"),n(),i(9,"span"),r(10,"Edit"),n()(),i(11,"button",26),b("click",function(){let o=p(t).$implicit,d=v();return u(d.toggleStatus(o))}),i(12,"mat-icon"),r(13),n(),i(14,"span"),r(15),n()()()()}if(e&2){let t=a.$implicit,s=D(5);l(),c("matMenuTriggerFor",s),l(12),y(t.isActive?"toggle_on":"toggle_off"),l(2),y(t.isActive?"Disable":"Activate")}}function at(e,a){e&1&&I(0,"tr",27)}function lt(e,a){e&1&&I(0,"tr",28)}function mt(e,a){if(e&1){let t=L();i(0,"mat-card",29)(1,"h3",30),r(2,"Edit User"),n(),i(3,"app-user-form",31),b("formSubmit",function(){p(t);let o=v();return u(o.onUserUpdated())}),n()()}if(e&2){let t=v();l(3),c("user",t.selectedUser)}}var B=(()=>{class e{constructor(t,s){this.userService=t,this.dialog=s,this.users=[],this.selectedUser=null,this.displayedColumns=["fullName","email","phone","role","password","assignedFields","status","actions"],this.loadUsers()}loadUsers(){this.userService.getUsers().subscribe(t=>this.users=t)}editUser(t){this.selectedUser=C({},t)}toggleStatus(t){let s=q(C({},t),{isActive:!t.isActive});this.userService.updateUser(s).subscribe(()=>this.loadUsers())}onUserUpdated(){this.selectedUser=null,this.loadUsers()}openAddUserPopup(){let t=this.dialog.open(N,{width:"600px",data:{user:{fullName:"",email:"",phone:"",role:"FieldOfficer",password:"",assignedFields:[]}}});t.componentInstance.formSubmit.subscribe(()=>{t.close(),this.loadUsers()})}static{this.\u0275fac=function(s){return new(s||e)(M(P),M(Ce))}}static{this.\u0275cmp=U({type:e,selectors:[["app-user-list"]],decls:34,vars:4,consts:[["noFields",""],["menu","matMenu"],[1,"mb-6","mt-6","flex","items-center","justify-between"],[1,"text-foreground","font-semibold"],["type","button",1,"bg-primary","text-primary-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","cursor-pointer",3,"click"],[1,"rounded-md"],["mat-table","",1,"mat-elevation-z8","w-full","rounded-md",3,"dataSource"],["matColumnDef","fullName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","role"],["matColumnDef","password"],["matColumnDef","assignedFields"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mt-6",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf","ngIfElse"],[1,"italic","text-gray-400"],[3,"ngClass"],["mat-icon-button","","aria-label","More actions",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mt-6"],[1,"text-md","mb-2","font-semibold"],[3,"formSubmit","user"]],template:function(s,o){s&1&&(i(0,"div",2)(1,"h2",3),r(2,"Users"),n(),i(3,"button",4),b("click",function(){return o.openAddUserPopup()}),r(4," Add User "),n()(),i(5,"div",5)(6,"table",6),g(7,7),f(8,He,2,0,"th",8)(9,$e,2,1,"td",9),_(),g(10,10),f(11,qe,2,0,"th",8)(12,Ge,2,1,"td",9),_(),g(13,11),f(14,ze,2,0,"th",8)(15,Je,2,1,"td",9),_(),g(16,12),f(17,Ke,2,0,"th",8)(18,Qe,3,3,"td",9),_(),g(19,13),f(20,Xe,2,0,"th",8)(21,Ye,2,1,"td",9),_(),g(22,14),f(23,Ze,2,0,"th",8)(24,it,4,2,"td",9),_(),g(25,15),f(26,nt,2,0,"th",8)(27,ot,3,2,"td",9),_(),g(28,16),f(29,rt,2,0,"th",8)(30,st,16,3,"td",9),_(),f(31,at,1,0,"tr",17)(32,lt,1,0,"tr",18),n(),f(33,mt,4,1,"mat-card",19),n()),s&2&&(l(6),c("dataSource",o.users),l(25),c("matHeaderRowDef",o.displayedColumns),l(),c("matRowDefColumns",o.displayedColumns),l(),c("ngIf",o.selectedUser))},dependencies:[E,Z,ee,te,T,N,Te,Me,xe,Ue,Se,be,ve,we,ye,Fe,Ee,j,fe,k,ge,Le,Ie,De,O,Ae,Ne,Ve,Re],encapsulation:2})}}return e})();var ke=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275cmp=U({type:e,selectors:[["app-user-management"]],decls:1,vars:0,template:function(s,o){s&1&&I(0,"app-user-list")},dependencies:[B],encapsulation:2})}}return e})();var dt=[{path:"",component:ke}],Oe=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275mod=W({type:e})}static{this.\u0275inj=A({imports:[$.forChild(dt),$]})}}return e})();var oi=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275mod=W({type:e})}static{this.\u0275inj=A({imports:[E,T,ie,B,N,Oe,O]})}}return e})();export{oi as UserManagementModule};
