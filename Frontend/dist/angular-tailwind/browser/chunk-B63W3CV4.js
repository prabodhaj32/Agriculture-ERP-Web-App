import"./chunk-F5X5MWHG.js";import{a as ke,b as Te}from"./chunk-PJFO3UXP.js";import{a as _e,b as Ce,c as we,d as Se}from"./chunk-3UC5BQGJ.js";import{a as ie,b as ne}from"./chunk-WN5LCBDM.js";import{d as N}from"./chunk-IJAZRT5H.js";import"./chunk-Q6H5GPQ3.js";import{a as oe,c as ae,d as re}from"./chunk-O7QCTWCW.js";import{$ as he,R as me,S as le,T as se,U as de,V as pe,W as ue,X as ce,Y as fe,Z as ge,_ as ye}from"./chunk-2ZJCXCTH.js";import{a as D,d as E,e as j,f as L,g as F,h as B,q as O,s as M}from"./chunk-R62AQPLH.js";import{Da as h,Ha as _,J as K,K as A,N as Q,Sa as i,Sb as $,T as g,Ta as n,Tb as ee,U as y,Ua as C,Va as w,Wa as S,Ya as I,Yb as x,_ as X,_a as k,e as J,ec as te,kb as Z,lb as m,lc as z,nb as b,oa as Y,pa as s,pb as u,qb as c,rb as f,ta as R,ya as T,za as V}from"./chunk-O6JE7VC5.js";import{a as G}from"./chunk-EQDQRRRY.js";var P=(()=>{class e{constructor(){this.tasks=[],this.tasksSubject=new J([]),this.tasks$=this.tasksSubject.asObservable();let o=localStorage.getItem("dailyTasks");o&&(this.tasks=JSON.parse(o),this.tasksSubject.next(this.tasks))}addTask(o){this.tasks.push(o),localStorage.setItem("dailyTasks",JSON.stringify(this.tasks)),this.tasksSubject.next([...this.tasks])}getTasks(){return[...this.tasks]}clearTasks(){this.tasks=[],localStorage.removeItem("dailyTasks"),this.tasksSubject.next([])}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var q=(()=>{class e{constructor(o,r){this.activityService=o,this.dialogRef=r,this.formClose=new X,this.task={field:"",taskType:"",workerName:"",duration:0,remarks:"",date:new Date().toISOString().split("T")[0],photos:[]}}onFileChange(o){let r=o.target.files,t=[];Array.from(r).forEach(l=>{let a=new FileReader;a.onload=()=>{a.result&&(t.push(a.result.toString()),this.task.photos=t)},a.readAsDataURL(l)})}onCancel(){this.dialogRef?this.dialogRef.close():this.formClose.emit()}submitTask(){this.activityService.addTask(G({},this.task)),alert("Task submitted successfully!"),this.dialogRef?this.dialogRef.close():this.formClose.emit(),this.task={field:"",taskType:"",workerName:"",duration:0,remarks:"",date:new Date().toISOString().split("T")[0],photos:[]}}static{this.\u0275fac=function(r){return new(r||e)(R(P),R(oe,8))}}static{this.\u0275cmp=T({type:e,selectors:[["app-daily-task-form"]],outputs:{formClose:"formClose"},decls:16,vars:6,consts:[[1,"p-6","bg-white","shadow","rounded","mt-6"],[1,"text-foreground","font-semibold","mb-4"],[1,"space-y-4",3,"submit"],["type","text","placeholder","Field","name","field","required","",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","Task Type","name","taskType","required","",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","Worker Name","name","workerName","required","",1,"input",3,"ngModelChange","ngModel"],["type","text","placeholder","Task Duration (in hours)","name","duration","required","",1,"input",3,"ngModelChange","ngModel"],["type","date","name","date","required","",1,"input","cursor-pointer",3,"ngModelChange","ngModel"],["placeholder","Remarks","name","remarks",1,"input",3,"ngModelChange","ngModel"],["type","file","multiple","",1,"input","cursor-pointer",3,"change"],[1,"flex","justify-end","gap-4","mt-4"],["type","submit",1,"bg-primary","text-primary-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","cursor-pointer"],["type","button",1,"bg-muted","text-muted-foreground","hover:text-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","cursor-pointer",3,"click"]],template:function(r,t){r&1&&(i(0,"div",0)(1,"h3",1),m(2,"Daily Task Log"),n(),i(3,"form",2),k("submit",function(){return t.submitTask()}),i(4,"input",3),f("ngModelChange",function(a){return c(t.task.field,a)||(t.task.field=a),a}),n(),i(5,"input",4),f("ngModelChange",function(a){return c(t.task.taskType,a)||(t.task.taskType=a),a}),n(),i(6,"input",5),f("ngModelChange",function(a){return c(t.task.workerName,a)||(t.task.workerName=a),a}),n(),i(7,"input",6),f("ngModelChange",function(a){return c(t.task.duration,a)||(t.task.duration=a),a}),n(),i(8,"input",7),f("ngModelChange",function(a){return c(t.task.date,a)||(t.task.date=a),a}),n(),i(9,"textarea",8),f("ngModelChange",function(a){return c(t.task.remarks,a)||(t.task.remarks=a),a}),n(),i(10,"input",9),k("change",function(a){return t.onFileChange(a)}),n(),i(11,"div",10)(12,"button",11),m(13," Submit "),n(),i(14,"button",12),k("click",function(){return t.onCancel()}),m(15," Cancel "),n()()()()),r&2&&(s(4),u("ngModel",t.task.field),s(),u("ngModel",t.task.taskType),s(),u("ngModel",t.task.workerName),s(),u("ngModel",t.task.duration),s(),u("ngModel",t.task.date),s(),u("ngModel",t.task.remarks))},dependencies:[M,B,D,E,j,O,F,L,N],encapsulation:2})}}return e})();var H=(()=>{class e{constructor(){this.attendance={workerName:"",field:"",inTime:"",outTime:""}}submitAttendance(){let{workerName:o,field:r,inTime:t,outTime:l}=this.attendance;if(!o||!r||!t||!l){alert("Please fill in all fields.");return}console.log("Attendance Submitted:",this.attendance),alert("Attendance Submitted!"),this.attendance={workerName:"",field:"",inTime:"",outTime:""}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=T({type:e,selectors:[["app-attendance-form"]],decls:12,vars:4,consts:[["attendanceForm","ngForm"],[1,"flex","justify-between","items-center","mb-4","mt-4","w-full"],[1,"text-foreground","font-semibold"],["type","button",1,"bg-primary","text-primary-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","cursor-pointer",3,"click"],[1,"p-6","bg-white","shadow","rounded","w-full","max-w-full","mx-auto","mt-6"],[1,"space-y-4","w-full"],["type","text","placeholder","Worker Name","name","workerName","required","",1,"input","w-full",3,"ngModelChange","ngModel"],["type","text","placeholder","Field","name","field","required","",1,"input","w-full",3,"ngModelChange","ngModel"],["type","time","placeholder","In Time","name","inTime","required","",1,"input","w-full",3,"ngModelChange","ngModel"],["type","time","placeholder","Out Time","name","outTime","required","",1,"input","w-full",3,"ngModelChange","ngModel"]],template:function(r,t){if(r&1){let l=I();i(0,"div",1)(1,"h3",2),m(2,"Attendance Form"),n(),i(3,"button",3),k("click",function(){return g(l),y(t.submitAttendance())}),m(4," Submit Attendance "),n()(),i(5,"div",4)(6,"form",5,0)(8,"input",6),f("ngModelChange",function(p){return g(l),c(t.attendance.workerName,p)||(t.attendance.workerName=p),y(p)}),n(),i(9,"input",7),f("ngModelChange",function(p){return g(l),c(t.attendance.field,p)||(t.attendance.field=p),y(p)}),n(),i(10,"input",8),f("ngModelChange",function(p){return g(l),c(t.attendance.inTime,p)||(t.attendance.inTime=p),y(p)}),n(),i(11,"input",9),f("ngModelChange",function(p){return g(l),c(t.attendance.outTime,p)||(t.attendance.outTime=p),y(p)}),n()()()}r&2&&(s(8),u("ngModel",t.attendance.workerName),s(),u("ngModel",t.attendance.field),s(),u("ngModel",t.attendance.inTime),s(),u("ngModel",t.attendance.outTime))},dependencies:[x,M,B,D,E,j,O,F,L,N],encapsulation:2})}}return e})();function De(e,d){e&1&&(i(0,"th",28),m(1," Date "),n())}function Ee(e,d){if(e&1&&(i(0,"td",29),m(1),n()),e&2){let o=d.$implicit;s(),b(" ",o.date," ")}}function Fe(e,d){e&1&&(i(0,"th",28),m(1," Field "),n())}function Ne(e,d){if(e&1&&(i(0,"td",29),m(1),n()),e&2){let o=d.$implicit;s(),b(" ",o.field," ")}}function We(e,d){e&1&&(i(0,"th",28),m(1," Task Type "),n())}function Re(e,d){if(e&1&&(i(0,"td",29),m(1),n()),e&2){let o=d.$implicit;s(),b(" ",o.taskType," ")}}function Ae(e,d){e&1&&(i(0,"th",28),m(1," Worker "),n())}function Ve(e,d){if(e&1&&(i(0,"td",29),m(1),n()),e&2){let o=d.$implicit;s(),b(" ",o.workerName," ")}}function Ie(e,d){e&1&&(i(0,"th",28),m(1," Duration "),n())}function je(e,d){if(e&1&&(i(0,"td",29),m(1),n()),e&2){let o=d.$implicit;s(),b(" ",o.duration,"h ")}}function Le(e,d){e&1&&(i(0,"th",28),m(1," Remarks "),n())}function Be(e,d){if(e&1&&(i(0,"td",29),m(1),n()),e&2){let o=d.$implicit;s(),b(" ",o.remarks," ")}}function Oe(e,d){e&1&&(i(0,"th",28),m(1," Photos "),n())}function Pe(e,d){if(e&1&&C(0,"img",32),e&2){let o=d.$implicit;_("src",o,Y)}}function qe(e,d){if(e&1&&(i(0,"td",29)(1,"div",30),h(2,Pe,1,1,"img",31),n()()),e&2){let o=d.$implicit;s(2),_("ngForOf",o.photos)}}function He(e,d){e&1&&C(0,"tr",33)}function Ue(e,d){e&1&&C(0,"tr",34)}function ze(e,d){e&1&&(i(0,"div",35),m(1,` No tasks found for the selected filter.
`),n())}var U=(()=>{class e{constructor(o){this.activityService=o,this.summary=[],this.filteredTasks=[],this.filterDate="",this.displayedColumns=["date","field","taskType","workerName","duration","remarks","photos"],this.dialog=Q(ae)}ngOnInit(){this.subscription=this.activityService.tasks$.subscribe(o=>{this.summary=o,this.filterTasks(),console.log("Tasks updated:",o)})}openAddTaskForm(){this.dialog.open(q,{width:"500px",disableClose:!0}).afterClosed().subscribe(r=>{r&&this.filterTasks()})}filterTasks(){this.filterDate?this.filteredTasks=this.summary.filter(o=>o.date===this.filterDate):this.filteredTasks=[...this.summary]}exportReport(){if(this.filteredTasks.length===0){alert("No tasks to export.");return}let t=[["Date","Field","Task Type","Worker Name","Duration","Remarks"].join(","),...this.filteredTasks.map(v=>[v.date,`"${v.field.replace(/"/g,'""')}"`,`"${v.taskType.replace(/"/g,'""')}"`,`"${v.workerName.replace(/"/g,'""')}"`,v.duration,`"${(v.remarks||"").replace(/"/g,'""')}"`].join(","))].join(`
`),l=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=window.URL.createObjectURL(l),p=document.createElement("a");p.href=a,p.download=`daily-task-summary-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(a)}clearAll(){confirm("Are you sure you want to clear all tasks?")&&(this.activityService.clearTasks(),this.summary=[],this.filteredTasks=[])}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(R(P))}}static{this.\u0275cmp=T({type:e,selectors:[["app-task-summary"]],decls:49,vars:6,consts:[["menu","matMenu"],[1,"flex","justify-between","items-center","mb-4","mt-2"],[1,"text-foreground","font-semibold"],[1,"flex","space-x-4"],[1,"bg-muted","text-muted-foreground","hover:text-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","cursor-pointer",3,"click"],[1,"bg-primary","text-primary-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","cursor-pointer",3,"click"],[1,"p-6","bg-white","shadow","rounded","mt-6"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex","items-center","gap-2"],[1,"mr-2"],["type","date",2,"cursor","pointer",3,"ngModelChange","change","ngModel"],["matIconButton","","aria-label","Options menu",2,"cursor","pointer",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[2,"color","rgb(243, 15, 7) cursor-pointer"],["mat-table","",1,"mat-elevation-z8","w-full",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","field"],["matColumnDef","taskType"],["matColumnDef","workerName"],["matColumnDef","duration"],["matColumnDef","remarks"],["matColumnDef","photos"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-gray-500 mt-4",4,"ngIf"],[1,"mt-4","flex","gap-4"],["mat-header-cell",""],["mat-cell",""],[1,"flex","gap-2","flex-wrap"],["class","w-16 h-16 object-cover rounded border cursor-pointer","matTooltip","Photo","alt","Task photo",3,"src",4,"ngFor","ngForOf"],["matTooltip","Photo","alt","Task photo",1,"w-16","h-16","object-cover","rounded","border","cursor-pointer",3,"src"],["mat-header-row",""],["mat-row",""],[1,"text-gray-500","mt-4"]],template:function(r,t){if(r&1){let l=I();i(0,"div",1)(1,"h3",2),m(2,"Daily Task Summary"),n(),i(3,"div",3)(4,"button",4),k("click",function(){return g(l),y(t.exportReport())}),m(5," Export CSV "),n(),i(6,"button",5),k("click",function(){return g(l),y(t.openAddTaskForm())}),m(7," Add Task "),n()()(),i(8,"div",6)(9,"div",7)(10,"div",8)(11,"label",9),m(12,"Filter by Date:"),n(),i(13,"input",10),f("ngModelChange",function(p){return g(l),c(t.filterDate,p)||(t.filterDate=p),y(p)}),k("change",function(){return g(l),y(t.filterTasks())}),n()(),i(14,"button",11)(15,"mat-icon"),m(16,"more_vert"),n()(),i(17,"mat-menu",null,0)(19,"button",12),k("click",function(){return g(l),y(t.clearAll())}),i(20,"mat-icon",13),m(21,"delete"),n(),m(22," Clear "),n()()(),i(23,"table",14),w(24,15),h(25,De,2,0,"th",16)(26,Ee,2,1,"td",17),S(),w(27,18),h(28,Fe,2,0,"th",16)(29,Ne,2,1,"td",17),S(),w(30,19),h(31,We,2,0,"th",16)(32,Re,2,1,"td",17),S(),w(33,20),h(34,Ae,2,0,"th",16)(35,Ve,2,1,"td",17),S(),w(36,21),h(37,Ie,2,0,"th",16)(38,je,2,1,"td",17),S(),w(39,22),h(40,Le,2,0,"th",16)(41,Be,2,1,"td",17),S(),w(42,23),h(43,Oe,2,0,"th",16)(44,qe,3,1,"td",17),S(),h(45,He,1,0,"tr",24)(46,Ue,1,0,"tr",25),n(),h(47,ze,2,0,"div",26),C(48,"div",27),n()}if(r&2){let l=Z(18);s(13),u("ngModel",t.filterDate),s(),_("matMenuTriggerFor",l),s(9),_("dataSource",t.filteredTasks),s(22),_("matHeaderRowDef",t.displayedColumns),s(),_("matRowDefColumns",t.displayedColumns),s(),_("ngIf",t.filteredTasks.length===0)}},dependencies:[x,$,ee,M,D,E,F,N,re,Se,Ce,_e,we,ne,ie,he,me,se,ce,de,le,fe,pe,ue,ge,ye,Te,ke],encapsulation:2})}}return e})();var ve=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=T({type:e,selectors:[["app-activity-log"]],decls:5,vars:0,consts:[[1,"p-4","space-y-10","max-w-7xl","mx-auto"]],template:function(r,t){r&1&&(i(0,"div",0)(1,"section"),C(2,"app-task-summary"),n(),i(3,"section"),C(4,"app-attendance-form"),n()())},dependencies:[H,U],encapsulation:2})}}return e})();var Ge=[{path:"activity-log",component:ve},{path:"",redirectTo:"activity-log",pathMatch:"full"}],xe=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=V({type:e})}static{this.\u0275inj=A({imports:[z.forChild(Ge),z]})}}return e})();var Bt=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=V({type:e})}static{this.\u0275inj=A({imports:[x,M,te,xe,q,H,U]})}}return e})();export{Bt as ActivityLogModule};
