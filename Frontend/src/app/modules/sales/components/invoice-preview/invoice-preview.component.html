<div class="flex items-center justify-between mb-4 mt-8">
  <h2 class="text-foreground font-semibold">Sales</h2>
  <button 
    class="bg-primary text-primary-foreground flex-none rounded-md px-4 py-2.5 text-xs font-semibold cursor-pointer"
    (click)="openNewSaleDialog()"
  >
     Add New Sale
  </button>
</div>

<div class="rounded-md mt-6">



  
  <table mat-table [dataSource]="sales" class="min-w-full table-auto border border-gray-200 rounded">
    <ng-container matColumnDef="buyer">
      <th mat-header-cell *matHeaderCellDef>Buyer</th>
      <td mat-cell *matCellDef="let sale">{{ sale.buyer }}</td>
    </ng-container>

    <ng-container matColumnDef="item">
      <th mat-header-cell *matHeaderCellDef>Item</th>
      <td mat-cell *matCellDef="let sale">{{ sale.item }}</td>
    </ng-container>

    <ng-container matColumnDef="quantity">
      <th mat-header-cell *matHeaderCellDef>Quantity</th>
      <td mat-cell *matCellDef="let sale">{{ sale.quantity }}</td>
    </ng-container>

    <ng-container matColumnDef="total">
      <th mat-header-cell *matHeaderCellDef>Total (Rs.)</th>
      <td mat-cell *matCellDef="let sale">{{ sale.total }}</td>
    </ng-container>

    <ng-container matColumnDef="deliveryDate">
      <th mat-header-cell *matHeaderCellDef>Delivery Date</th>
      <td mat-cell *matCellDef="let sale">{{ sale.deliveryDate }}</td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell *matCellDef="let sale">

        <button mat-icon-button (click)="showInvoice(sale)" aria-label="Preview sale">
  <mat-icon>more_vert</mat-icon>
</button>

      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  <div *ngIf="selectedInvoice" class="mt-6 p-4 border rounded bg-gray-50">
    <h3 class="text-lg font-semibold mb-2">Invoice Preview</h3>
    <p><strong>Buyer:</strong> {{ selectedInvoice.buyer }}</p>
    <p><strong>Item:</strong> {{ selectedInvoice.item }}</p>
    <p><strong>Quantity:</strong> {{ selectedInvoice.quantity }}</p>
    <p><strong>Unit Price:</strong> Rs. {{ selectedInvoice.unitPrice }}</p>
    <p><strong>Total:</strong> Rs. {{ selectedInvoice.total }}</p>
    <p><strong>Delivery Date:</strong> {{ selectedInvoice.deliveryDate }}</p>

    <button class="bg-red-600 text-white px-3 py-1 rounded mt-3 cursor-pointer" (click)="closePreview()">Close Preview</button>
    <button class="bg-blue-600 text-white px-3 py-1 rounded mt-3 ml-2 cursor-pointer" (click)="savePdf()">Download PDF</button>
  </div>
</div>
